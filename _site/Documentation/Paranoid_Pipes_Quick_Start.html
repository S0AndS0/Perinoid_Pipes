<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <link rel="stylesheet" href="/assets/css/style.css?v=6b26304f89141400512e932cdbdd42dbdc347ad2">
    <title>Perinoid_Pipes by S0AndS0</title>
  </head>

  <body>

    <header>
      <div class="container">
        <h1>Perinoid_Pipes</h1>
        <h2>Where named pipes are used for encryption</h2>

        <section id="downloads">
          
          <a href="http://github.com/S0AndS0/Perinoid_Pipes" class="btn btn-github"><span class="icon"></span>View on GitHub</a>
        </section>
      </div>
    </header>

    <div class="container">
      <section id="main_content">
        <h1 id="quick-start">Quick start</h1>

<blockquote>
  <p>See guides under the <a href="Documentation/"><code class="highlighter-rouge">Documentation/</code></a> directory for
complete explanations of this project’s target usage information and command
line options. This document only covers downloading and initial testing of
project features. See the Frequently asked questions
document <a href="Documentation/FAQ.md">FAQ.md</a> for answers to common questions.</p>
</blockquote>

<h2 id="step-1">Step 1</h2>

<blockquote>
  <p>Import public GnuPG key into server that will be running this script or one of
it’s written custom copies.</p>
</blockquote>

<h3 id="from-file-transfer-to-server">From file transfer to server</h3>

<div class="highlighter-rouge"><pre class="highlight"><code>gpg --import /path/to/pubkey
</code></pre>
</div>

<h3 id="from-key-server-instead">From key server instead</h3>

<div class="highlighter-rouge"><pre class="highlight"><code>gpg --import user@email.domain --recv-keys https://key-server.domain
</code></pre>
</div>

<blockquote>
  <p>Note for the most secure results with GnuPG encryption via this script the
related private key should <strong>not</strong> ever live on the same server that is
running this script. For testing and special usage cases you may wish to
(be tempted to) generate a private/public key pare on the target server using
this script, however, this would be generally a very discouraged security
practice to implement on publicly accessible servers; see Section
<code class="highlighter-rouge">Scenario two</code> within <a href="Documentation/"><code class="highlighter-rouge">Documentation/</code></a> directory for more
information. If only testing then don’t forget to delete both keys again and
to <strong>not</strong> upload test keys to pubic key servers as that would be a rude use
of their services.</p>
</blockquote>

<h2 id="steps-2">Step(s) 2</h2>

<h3 id="change-to-desired-download-directory">Change to desired download directory</h3>

<div class="highlighter-rouge"><pre class="highlight"><code>cd ~/Downloads
</code></pre>
</div>

<h3 id="clone-project-from-github--change-directories-to-the-projects-folder">Clone project from GitHub &amp; change directories to the project’s folder</h3>

<div class="highlighter-rouge"><pre class="highlight"><code>git clone https://github.com/S0AndS0/Perinoid_Pipes
cd ~/Downloads/Perinoid_Pipes
</code></pre>
</div>

<h3 id="change-scripts-name-and-location-optional">Change script’s name and location (optional)</h3>

<div class="highlighter-rouge"><pre class="highlight"><code>cp Paranoid_Pipes.sh /usr/local/sbin/pipe_writer.sh
</code></pre>
</div>

<h3 id="change-script-ownership">Change script ownership</h3>

<blockquote>
  <p>Note the use of <code class="highlighter-rouge">${USER}</code> built in variable bellow, this will set the script
copy to be owned by currently logged in user.</p>
</blockquote>

<div class="highlighter-rouge"><pre class="highlight"><code>chown ${USER}:${USER} /usr/local/sbin/pipe_writer.sh
</code></pre>
</div>

<h3 id="change-script-permissions">Change script permissions</h3>

<blockquote>
  <p>Note the bellow setting of <code class="highlighter-rouge">700</code> sets permissions such that only the owning
<code class="highlighter-rouge">${USER}</code> may execute the script copy, if instead you wish to also allow to
group execution then use <code class="highlighter-rouge">710</code> instead.</p>
</blockquote>

<div class="highlighter-rouge"><pre class="highlight"><code>chmod 700 /usr/local/sbin/pipe_writer.sh
</code></pre>
</div>

<h3 id="change-current-working-directory">Change current working directory</h3>

<blockquote>
  <p>Note bellows’s use of <code class="highlighter-rouge">~</code> (tilde) will change your shell’s working directory to
the default (usually <code class="highlighter-rouge">${HOME}</code>) for currently logged in user. However, if logged
in as <code class="highlighter-rouge">root</code> the bellow will instead transfer your shell’s working directory to
<code class="highlighter-rouge">/</code> (root) directory.</p>
</blockquote>

<div class="highlighter-rouge"><pre class="highlight"><code>cd ~
</code></pre>
</div>

<h2 id="steps-3">Step(s) 3</h2>

<h3 id="run-script-copy--h--help-docs">Run script copy <code class="highlighter-rouge">-h</code>/<code class="highlighter-rouge">--help</code> docs</h3>

<div class="highlighter-rouge"><pre class="highlight"><code>pipe_writer.sh -h
</code></pre>
</div>

<blockquote>
  <p>You (the readers) will be using this switch often when testing this script’s
variable assignments; place either <code class="highlighter-rouge">-h</code> or <code class="highlighter-rouge">--help</code> at the end of your commands
to test if the script is reading your other input as desired.
Note above will only work if you have chosen to copy or move the main
script to a path that is also found within your shell’s <code class="highlighter-rouge">${PATH}</code> variable;
hint <code class="highlighter-rouge">echo -e "${PATH//:/\\n}"</code> will display every directory within the
variable one per line, choose one of those paths for saving your copy of the
main script for easy access to it’s powers.</p>
</blockquote>

<h3 id="run-script-with-command-line-options">Run script with command line options</h3>

<blockquote>
  <p>Note all command line options can be found within
the <a href="Documentation/Paranoid_Pipes_CLO.md">Paranoid_Pipes_CLO.md</a> file listed
in tables that provide their default state and constraints.
Test named pipe reading script by outputting to current terminal using the
following options. Note if script was moved as shown above then use
<code class="highlighter-rouge">pipe_writer.sh</code> instead of <code class="highlighter-rouge">./Paranoid_Pipes.sh</code>, ie without <code class="highlighter-rouge">./</code> when
modifying bellow command.</p>
</blockquote>

<div class="highlighter-rouge"><pre class="highlight"><code>pipe_writer.sh --enc-parsing-save-output-yn=no\
 --enc-parsing-disown-yn=no\
 --debug-level=5 --log-level=0\
 --enc-parsing-bulk-out-dir=/tmp/test_bulk\
 --enc-pipe-file=/tmp/test.pipe\
 --enc-parsing-recipient=youremail@host.domain\
 --enc-parsing-output-rotate-recipient=youremail@host.domain -h
</code></pre>
</div>

<blockquote>
  <p>Remove the ‘-h’ option from above command to have parsed output read from
above pipe name dumped to current terminal. Additionally the back-slashes
(<code class="highlighter-rouge">\</code>) in above (and much of bellow) are only to aid in reading and you may
instead enter command line options on a single line so long as your remember
to remove the back-slashes while following along.
Test above by opening second terminal and writing some stings, concatenating
files, and/or writing file paths to the new pipe file.</p>
</blockquote>

<h3 id="example-commands-that-maybe-used-to-test-your-new-named-pipe">Example commands that maybe used to test your new named pipe</h3>

<h4 id="example-of-writing-single-line-string-to-named-pipe">Example of writing single line string to named pipe</h4>

<div class="highlighter-rouge"><pre class="highlight"><code>echo 'Testing 123 abc' &gt;  /tmp/test.pipe
</code></pre>
</div>

<h4 id="example-of-writing-multi-line-string-to-named-pipe">Example of writing multi-line string to named pipe</h4>

<div class="highlighter-rouge"><pre class="highlight"><code>echo -e 'Testing 123 abc\nTesting cba 321' &gt;  /tmp/test.pipe
</code></pre>
</div>

<h4 id="example-of-cating-multi-line-file-to-named-pipe">Example of cat’ing multi-line file to named pipe</h4>

<div class="highlighter-rouge"><pre class="highlight"><code>cat /etc/rc.local &gt; /tmp/test.pipe
</code></pre>
</div>

<h4 id="example-of-cating-multi-line-string-to-named-pipe">Example of cat’ing multi-line string to named pipe</h4>

<div class="highlighter-rouge"><pre class="highlight"><code>cat &gt; /tmp/test.pipe &lt;&lt;EOF
testing multi-line
redirection
to named pipe
EOF
</code></pre>
</div>

<blockquote>
  <p>The output of all of above example pipe write commands should appear in
original terminal with <code class="highlighter-rouge">----GPG Begin...</code> and <code class="highlighter-rouge">-----End...</code> lines preceding
and ending each interaction.</p>
</blockquote>

<p>Next example is different though…</p>

<h4 id="example-of-providing-full-file-path-to-named-pipe-instead">Example of providing full file path to named pipe instead</h4>

<div class="highlighter-rouge"><pre class="highlight"><code>echo '/etc/rc.local' &gt; /tmp/test.pipe
</code></pre>
</div>

<p>… because a known file path was used as an input to the named pipe then this
 script (and those that it writes) will detect this and treat’em special; even
 more special treatment is used on known directory paths.</p>

<blockquote>
  <p>Note if you have changed the ‘–enc-parsing-bulk-out-dir=/tmp/test_bulk’ command
line option above then this directory file path will be that which was defined.</p>
</blockquote>

<h4 id="example-of-providing-file-directory-path">Example of providing file directory path</h4>

<div class="highlighter-rouge"><pre class="highlight"><code>echo "${HOME}/Pictures" &gt; /tmp/test.pipe
</code></pre>
</div>

<blockquote>
  <p>One <em>gotcha</em> the above two examples will only work on the first line that
includes a file or directory path of a multi-line write command. This is to
avoid the script main script or it’s copies from misinterpreting file paths
in a text document as paths to take action on. So do <strong>not</strong> do
<code class="highlighter-rouge">cat mylist_of_files.txt &gt; /tmp/test.pipe</code> and expect anything but funky
things to happen.</p>
</blockquote>

<h4 id="example-command-to-list-encrypted-files-under-the-bulk-output-directory">Example command to list encrypted files under the bulk output directory</h4>

<div class="highlighter-rouge"><pre class="highlight"><code>ls -hal /tmp/test_bulk/*.gpg
</code></pre>
</div>

<h2 id="step-4">Step 4</h2>

<h3 id="quit-background-or-foreground-pipe-listener">Quit background or foreground pipe listener</h3>

<blockquote>
  <p>By writing the default quit string to named pipe from another terminal as
shown bellow, the script will not only quit within the previous terminal but
also remove it’s associated named pipe file.</p>
</blockquote>

<div class="highlighter-rouge"><pre class="highlight"><code>echo 'quit' &gt; /tmp/test.pipe
</code></pre>
</div>

<blockquote>
  <p>Note the above mentioned basic cleanup steps taken by this script are to
prevent a processes from <em>talking</em> to <em>nobody</em> when there’s no listener
attached to named pipe. Writing to a named pipe with no listener will cause
<strong>blocking</strong> within your system so please don’t try to circumvent cleanup.</p>
</blockquote>

<h2 id="step-5">Step 5</h2>

<blockquote>
  <p>Was that to easy? Then consider checking out the advanced usage scenarios
linked within the <a href="Documentation/ReadMe.md">ReadMe.md</a> file for specific threat
models that the authors of this project have already documented. Or consider
writing your own and submitting a <code class="highlighter-rouge">pull-request</code>/<code class="highlighter-rouge">request-pull</code> command with
<code class="highlighter-rouge">git</code> to get your additions merged into this project for others to use.</p>
</blockquote>

<h2 id="licensing-notice-for-this-file">Licensing notice for this file</h2>

<div class="highlighter-rouge"><pre class="highlight"><code>    Copyright (C) 2016 S0AndS0.
    Permission is granted to copy, distribute and/or modify this document under
    the terms of the GNU Free Documentation License, Version 1.3 published by
    the Free Software Foundation; with the Invariant Sections being
    "Title page". A copy of the license is included in the directory entitled
    "License".
</code></pre>
</div>

<p><a href="/Documentation/Contributing_Financially.html">Link to title page</a></p>

<p><a href="/Licenses/GNU_FDLv1.3_Documentation.html">Link to related license</a></p>

      </section>
    </div>

    
  </body>
</html>
